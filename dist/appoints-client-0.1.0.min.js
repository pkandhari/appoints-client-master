!function(e){try{e=angular.module("appoints-client-templates")}catch(t){e=angular.module("appoints-client-templates",[])}e.run(["$templateCache",function(e){e.put("appointments/appointments.html",'<div ng-app="appoints" class="row"><div class="col-md-6"><h2>Create new appointment</h2><form role="form" name="form"><div class="form-group"><input class="form-control" id="title" placeholder="Enter appointment description" ng-model="newAppointment.title"></div><div class="form-group"><label for="dateAndTime">Appointment date and time</label><div class="dropdown"><a class="dropdown-toggle" id="dropdown2" role="button" data-toggle="dropdown"><div class="input-group"><p class="form-control-static">{{ newAppointment.dateAndTime | date:\'d MMM, y H:mm\' }}</p></div></a><ul class="" role="menu" aria-labelledby="dLabel"><datetimepicker ng-model="newAppointment.dateAndTime" data-on-set-time="onTimeSet(newDate, oldDate)" datetimepicker-config="{ dropdownSelector: \'#dropdown2\', startView: \'hour\', minuteStep: 15 }"></ul></div></div><div class="form-group"><label for="duration">Duration</label><select class="form-control" id="duration" ng-model="newAppointment.duration"><option value="15">15 minutes</option><option value="30">30 minutes</option><option value="60">60 minutes</option><option value="90">90 minutes</option></select></div><div class="form-group"><label for="remarks">Remarks</label><textarea id="remarks" class="form-control" rows="3" ng-model="newAppointment.remarks"> </textarea></div><button type="submit" class="btn btn-default" ng-click="createAppointment()" ng-disabled="form.$invalid">Create</button></form></div><div class="col-md-6"><h2>Upcoming appointments</h2><p ng-if="upcomingAppointments.length === 0">-- None --</p><ul class="list-group"><li class="list-group-item" ng-repeat="appointment in upcomingAppointments"><div><div class="dropdown"><a href="" class="pull-right" ng-click="removeAppointment(appointment)" title="Remove"><span class="glyphicon glyphicon-remove"></span></a> <a class="dropdown-toggle" role="button" data-toggle="dropdown" data-target="#" title="Reschedule appointment" id="appointment{{$index}}" href="" ng-click="setAppointmentForEdit(appointment)"><span class="glyphicon glyphicon-time"></span></a><ul class="dropdown-menu" role="menu"><datetimepicker data-ng-model="editAppointment.dateAndTime" data-datetimepicker-config="{ dropdownSelector: \'#appointment{{$index}}\', startView: \'hour\', minuteStep: 15 }" on-set-time="reschedule(newDate, oldDate)"></ul></div></div><h4 class="list-group-item-heading">{{appointment.title}} <small>{{appointment.dateAndTime | date:\'d MMM, y H:mm\'}}-{{appointment.endDateAndTime | date:\'H:mm\'}}, duration {{appointment.duration}} mins</small></h4><p class="list-group-item-text">{{appointment.remarks}}</p></li></ul><h2>Past appointments</h2><p ng-if="pastAppointments.length === 0">-- None --</p><ul class="list-group"><li class="list-group-item" ng-repeat="appointment in pastAppointments"><div><a href="" class="pull-right" ng-click="removeAppointment(appointment)" title="Remove"><span class="glyphicon glyphicon-remove"></span></a></div><h4 class="list-group-item-heading">{{appointment.title}} <small>{{appointment.dateAndTime | date:\'d MMM, y H:mm\'}}-{{appointment.endDateAndTime | date:\'H:mm\'}}, duration {{appointment.duration}} mins</small></h4><p class="list-group-item-text">{{appointment.remarks}}</p></li></ul></div></div>')}])}(),function(e){try{e=angular.module("appoints-client-templates")}catch(t){e=angular.module("appoints-client-templates",[])}e.run(["$templateCache",function(e){e.put("appointments/landingpage.html",'<div ng-app="appoints"><h1 style="text-align: center;padding-bottom: 25px"><b>Welcome! {{user.displayName}}</b></h1><div class="col-md-6"><h2>List of Doctors</h2><ul class="list-group"><li class="list-group-item" ng-repeat="doctor in doctors"><div><div class="dropdown"><a class="dropdown-toggle" role="button" data-toggle="dropdown" title="Open doctor details" id="doctor{{$index}}" href="" ng-click="openDoctorDetails(doctor)"><span class="glyphicon glyphicon-new-window"></span></a> </div></div><h4 class="list-group-item-heading">{{doctor.UserDetails.FirstName}} {{doctor.UserDetails.LastName}}, <small>Graduated from: {{doctor.GraduatedFrom}}, Practice: {{doctor.FieldOfPractice}}</small></h4><p class="list-group-item-text">{{doctor.CurrentWorkingStatus}}</p></li></ul></div><div class="col-md-6"><h2>List of Patients</h2><ul class="list-group"><li class="list-group-item" ng-repeat="patient in patients"><div><div class="dropdown"><a class="dropdown-toggle" role="button" data-toggle="dropdown" title="Open patient details" id="patient{{$index}}" href="" ng-click="openPatientDetails(patient)"><span class="glyphicon glyphicon-new-window"></span></a> </div></div><h4 class="list-group-item-heading">{{patient.UserDetails.FirstName}} {{patient.UserDetails.LastName}}, <small>Health Issues: {{patient.HealthIssues}}, Allergies: {{patient.Allergies}}</small></h4><p class="list-group-item-text">{{patient.CurrentWorkingStatus}}</p></li></ul></div></div>')}])}(),function(e){try{e=angular.module("appoints-client-templates")}catch(t){e=angular.module("appoints-client-templates",[])}e.run(["$templateCache",function(e){e.put("appointments/logindetails.html",'<div ng-app="appoints" class="col-md-6 col-md-offset-3"><h1 style="text-align: center;padding-bottom: 25px"><b>Update Login Details</b></h1><form name="form" ng-submit="vm.login()" role="form"><div class="form-group" ng-class="{ \'has-error\': form.oldPassword.$dirty && form.oldPassword.$error.required }"><label for="oldPassword">Old Password</label><input type="password" name="oldPassword" id="oldPassword" class="form-control" ng-model="oldPassword" required> <span ng-show="form.oldPassword.$dirty && form.oldPassword.$error.required" class="help-block">Old password is required</span></div><div class="form-group" ng-class="{ \'has-error\': form.newPassword.$dirty && form.newPassword.$error.required }"><label for="newPassword">New Password</label><input type="password" name="newPassword" id="newPassword" class="form-control" ng-model="newPassword" required> <span ng-show="form.newPassword.$dirty && form.newPassword.$error.required" class="help-block">New password is required</span></div><div class="form-actions"><button type="submit" ng-click="updatelogindetails()" ng-disabled="form.$invalid || vm.dataLoading" class="btn btn-primary">Login</button> <a href="#/" class="btn btn-link">Cancel</a></div></form></div>')}])}(),function(e){try{e=angular.module("appoints-client-templates")}catch(t){e=angular.module("appoints-client-templates",[])}e.run(["$templateCache",function(e){e.put("appointments/profile.html",'<div class="" ng-app="appoints" ng-controller="ProfileCtrl"><div style="font-size: larger;padding-left: 5%" ng-if="isreadonly"><a class="dropdown-toggle" role="button" title="Go to landing page" id="patient{{$index}}" href="" ng-click="goToLandingPage()"><span class="glyphicon glyphicon-circle-arrow-left"></span>Go to landing page</a></div><h1 ng-if="!dataLoading" style="text-align: center;padding-bottom: 25px"><b>{{profileData.UserDetails.FirstName}} {{profileData.UserDetails.LastName}}</b></h1><form name="form" ng-submit="register()" ng-if="!dataLoading" role="form"><div class="form-group col-md-12" style="padding-left: 15%;padding-right: 15%"><div class="form-group col-md-12" ng-class="{ \'has-error\': form.email.$dirty && (form.email.$error.required || form.email.$error.email) }"><label for="username">Email</label><input type="email" name="email" id="email" class="form-control" ng-readonly="{{isreadonly}}" ng-model="profileData.UserDetails.Email" required> <span ng-show="form.email.$dirty && form.email.$error.email" class="help-block">This email format is invalid!</span> <span ng-show="form.email.$dirty && form.email.$error.required" class="help-block">Email is required</span></div></div><div class="form-group col-md-12" style="padding-left: 15%;padding-right: 15%"><div class="form-group col-md-6" ng-class="{ \'has-error\': form.firstName.$dirty && form.firstName.$error.required }"><label for="username">First name</label><input name="firstName" id="firstName" class="form-control" ng-readonly="{{isreadonly}}" ng-model="profileData.UserDetails.FirstName" required> <span ng-show="form.firstName.$dirty && form.firstName.$error.required" class="help-block">First name is required</span></div><div class="form-group col-md-6" ng-class="{ \'has-error\': form.lastName.$dirty && form.lastName.$error.required }"><label for="username">Last name</label><input name="lastName" id="lastName" class="form-control" ng-readonly="{{isreadonly}}" ng-model="profileData.UserDetails.LastName" required> <span ng-show="form.lastName.$dirty && form.lastName.$error.required" class="help-block">Last name is required</span></div></div><div class="form-group col-md-12" style="padding-left: 15%;padding-right: 15%"><div class="form-group col-md-6"><label for="username">Marital Status</label><input name="maritalStatus" id="maritalStatus" class="form-control" ng-readonly="{{isreadonly}}" ng-model="profileData.UserDetails.MaritalStatus"></div><div class="form-group col-md-6"><label for="username">Gender</label><input name="gender" id="gender" class="form-control" ng-readonly="{{isreadonly}}" ng-model="profileData.UserDetails.Gender"></div></div><div class="form-group col-md-12" style="padding-left: 15%;padding-right: 15%"><div class="form-group col-md-6"><label for="username">Address</label><input name="address" id="address" class="form-control" ng-readonly="{{isreadonly}}" ng-model="profileData.UserDetails.Address"></div><div class="form-group col-md-6"><label for="username">Postal Code</label><input name="postalCode" id="postalCode" class="form-control" ng-readonly="{{isreadonly}}" ng-model="profileData.UserDetails.PostalCode"></div></div><div class="form-group col-md-12" style="padding-left: 15%;padding-right: 15%"><div class="form-group col-md-6"><label for="username">City</label><input name="city" id="city" class="form-control" ng-readonly="{{isreadonly}}" ng-model="profileData.UserDetails.City"></div><div class="form-group col-md-6"><label for="username">Province</label><input name="province" id="province" class="form-control" ng-readonly="{{isreadonly}}" ng-model="profileData.UserDetails.Province"></div></div><div class="form-group col-md-12" style="padding-left: 15%;padding-right: 15%"><div class="form-group col-md-6"><label for="username">Country</label><input name="country" id="country" class="form-control" ng-readonly="{{isreadonly}}" ng-model="profileData.UserDetails.Country"></div><div class="form-group col-md-6"><label for="username">Contact</label><input type="number" name="contact" id="contact" class="form-control" ng-readonly="{{isreadonly}}" ng-model="profileData.UserDetails.Contact"></div></div><div class="form-group col-md-12" ng-if="!isreadonly" style="padding-left: 15%;padding-right: 15%"><div class="form-actions col-md-6"><button type="submit" ng-disabled="form.$invalid || dataLoading" class="btn btn-primary">Submit</button> <a href="#/usersignin" class="btn btn-link">Cancel</a></div></div></form></div>')}])}(),function(e){try{e=angular.module("appoints-client-templates")}catch(t){e=angular.module("appoints-client-templates",[])}e.run(["$templateCache",function(e){e.put("appointments/usersignin.html",'<div ng-app="appoints" class="col-md-6 col-md-offset-3"><h1 style="text-align: center;padding-bottom: 25px"><b>Login</b></h1><form name="form" ng-submit="vm.login()" role="form"><div class="form-group" ng-class="{ \'has-error\': form.username.$dirty && form.username.$error.required }"><label for="username">Username</label><input name="username" id="username" class="form-control" ng-model="username" required> <span ng-show="form.username.$dirty && form.username.$error.required" class="help-block">Username is required</span></div><div class="form-group" ng-class="{ \'has-error\': form.password.$dirty && form.password.$error.required }"><label for="password">Password</label><input type="password" name="password" id="password" class="form-control" ng-model="password" required> <span ng-show="form.password.$dirty && form.password.$error.required" class="help-block">Password is required</span></div><div class="form-actions"><button type="submit" ng-click="login()" ng-disabled="form.$invalid || vm.dataLoading" class="btn btn-primary">Login</button> <a href="#/usersignup" class="btn btn-link">Signup</a></div></form></div>')}])}(),function(e){try{e=angular.module("appoints-client-templates")}catch(t){e=angular.module("appoints-client-templates",[])}e.run(["$templateCache",function(e){e.put("appointments/usersignup.html",'<div class="" ng-app="appoints"><h1 style="text-align: center;padding-bottom: 25px">Sign up your practice to <b>DOC Connect</b></h1><form name="form" ng-submit="vm.register()" role="form"><div class="form-group col-md-12" style="padding-left: 15%;padding-right: 15%"><div class="form-group col-md-12" ng-class="{ \'has-error\': form.email.$dirty && (form.email.$error.required || form.email.$error.email) }"><label for="username">Email</label><input type="email" name="email" id="email" class="form-control" ng-model="vm.user.email" required> <span ng-show="form.email.$dirty && form.email.$error.email" class="help-block">This email format is invalid!</span> <span ng-show="form.email.$dirty && form.email.$error.required" class="help-block">Email is required</span></div></div><div class="form-group col-md-12" style="padding-left: 15%;padding-right: 15%"><div class="form-group col-md-6" ng-class="{ \'has-error\': form.firstName.$dirty && form.firstName.$error.required }"><label for="username">First name</label><input name="firstName" id="firstName" class="form-control" ng-model="vm.user.firstName" required> <span ng-show="form.firstName.$dirty && form.firstName.$error.required" class="help-block">First name is required</span></div><div class="form-group col-md-6" ng-class="{ \'has-error\': form.lastName.$dirty && form.lastName.$error.required }"><label for="username">Last name</label><input name="lastName" id="lastName" class="form-control" ng-model="vm.user.lastName" required> <span ng-show="form.lastName.$dirty && form.lastName.$error.required" class="help-block">Last name is required</span></div></div><div class="form-group col-md-12" style="padding-left: 15%;padding-right: 15%"><div class="form-group col-md-6" ng-class="{ \'has-error\': form.username.$dirty && form.username.$error.required }"><label for="username">Username</label><input name="username" id="username" class="form-control" ng-model="vm.user.username" required> <span ng-show="form.username.$dirty && form.username.$error.required" class="help-block">Username is required</span></div><div class="form-group col-md-6" ng-class="{ \'has-error\': form.password.$dirty && form.password.$error.required }"><label for="password">Password</label><input type="password" name="password" id="password" class="form-control" ng-model="vm.user.password" required> <span ng-show="form.password.$dirty && form.password.$error.required" class="help-block">Password is required</span></div></div><div class="form-group col-md-12" style="padding-left: 15%;padding-right: 15%"><div class="form-actions col-md-6"><button type="submit" ng-disabled="form.$invalid || vm.dataLoading" class="btn btn-primary">Sign up</button> <img ng-if="vm.dataLoading" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="> <a href="#/usersignin" class="btn btn-link">Cancel</a></div></div></form></div>')}])}(),function(e){try{e=angular.module("appoints-client-templates")}catch(t){e=angular.module("appoints-client-templates",[])}e.run(["$templateCache",function(e){e.put("home/home.html",'<div class="row"><div class="col-md-6" style="padding-top: 20px;font-family: cursive;font-size: 50px">A Good and healthy body is the reason behind a healthy mind.</div><div class="col-md-6"><img src="assets/images/image1.png"></div></div><div class="row"></div><footer class="pull-right">DOC Connect {{version}} - &copy; Pritpal Singh Kandhari, 2022</footer>')}])}(),function(e){try{e=angular.module("appoints-client-templates")}catch(t){e=angular.module("appoints-client-templates",[])}e.run(["$templateCache",function(e){e.put("auth/login.html",'<h2>Login</h2><p>Appoints doesn\'t store user credentials such as usernames and passwords. It\'s required to use one of the providers below.</p><p><a href="" ng-click="loginGoogle()">Login with Google</a></p>')}])}(),function(e){try{e=angular.module("appoints-client-templates")}catch(t){e=angular.module("appoints-client-templates",[])}e.run(["$templateCache",function(e){e.put("shared/flash.html",'<section ng-controller="FlashCtrl" class="flashcontainer"><div ng-repeat="flashMessage in flashMessages" ng-class="getMessageClass(flashMessage.level)"><button type="button" class="close" data-dismiss="alert" ng-click="dismiss(flashMessage)">&times;</button> {{flashMessage.message}}<ul ng-if="flashMessage.details.errors"><li ng-repeat="error in flashMessage.details.errors">{{error.message}}</li></ul></div></section>')}])}(),angular.module("appoints.config",[]).constant("config",{defaultApiEndpoint:"http://localhost:3000",apiEndpoint:"http://localhost/DocConnectAPI"}).constant("appName","appoints-client").constant("appVersion","0.1.0").constant("appDescription","An example appointment scheduler app"),angular.module("appoints.directives",[]),angular.module("appoints.flash",[]).factory("flash",["$rootScope","$timeout",function(e,t){function n(n,o,a){o=o||"info";var i={message:n,level:o,details:a};s.push(i),t(function(){r(i)},5e3),e.$broadcast("event:flash.add",i)}function o(e){e.message?n(e.message,"error",e):n(e,"error")}function a(){return s}function r(t){var n=s.indexOf(t);s.splice(n,1),e.$broadcast("event:flash.remove",t)}function i(){s=[],e.$broadcast("event:flash.clear",!0)}var s=[];return{add:n,addError:o,all:a,remove:r,clear:i}}]).controller("FlashCtrl",["$scope","flash",function(e,t){e.flashMessages=[],e.getMessageClass=function(e){return"error"===e&&(e="danger"),"alert alert-"+e},e.dismiss=function(e){t.remove(e)},e.$on("event:flash.add",function(){e.flashMessages=t.all()}),e.$on("event:flash.remove",function(){e.flashMessages=t.all()}),e.$on("event:flash.clear",function(){e.flashMessages=[],e.$apply()})}]).directive("apHideFlash",["flash",function(e){return{restrict:"A",link:function(t,n){n.bind("click",function(t){var n=angular.element(t.target);n.parents().hasClass("flashcontainer")||e.clear()})}}}]),angular.module("appoints.home",["appoints.config","ngRoute"]).controller("HomeCtrl",["$scope","appVersion",function(e,t){e.version=t}]),angular.module("appoints.api",["angular-hal","appoints.config"]).factory("appointsapi",["halClient","config",function(e,t){var n=e.$get(t.defaultApiEndpoint);return{apiRoot:n}}]),angular.module("appoints.appointments",["ngRoute","appoints.api"]).controller("AppointmentsCtrl",["$scope","$window","_","appointsapi","flash","moment",function(e,t,n,o,a,r){function i(){return o.apiRoot.then(function(t){return t.$get("appointments").then(function(t){return t.$get("appointment").then(function(t){e.upcomingAppointments=n.filter(t,function(e){return r(e.dateAndTime)>r()}),e.pastAppointments=n.filter(t,function(e){return r(e.dateAndTime)<=r()})})},function(e){a.addError(e.data)})})}function s(){e.newAppointment={title:"",dateAndTime:r().startOf("day").add(1,"days").add(9,"hours").toDate(),duration:30,remarks:""},e.editAppointment=null}e.getEndTime=function(e){return r(e.dateAndTime).add(e.duration,"minutes").format("H:mm")},e.createAppointment=function(){e.newAppointment.endDateAndTime=r(e.newAppointment.dateAndTime).add(e.newAppointment.duration,"minutes")},e.removeAppointment=function(e){return t.confirm("Are you sure?")?e.$del("self").then(function(e){a.add(e.message)},function(e){a.addError(e.data)}).then(i):void 0},e.setAppointmentForEdit=function(t){e.editAppointment=angular.copy(t)},e.reschedule=function(t){if(e.editAppointment){e.editAppointment.dateAndTime=t,e.editAppointment.endDateAndTime=r(e.editAppointment.dateAndTime).add(e.editAppointment.duration,"minutes").toDate();var o=n(e.upcomingAppointments).find({id:e.editAppointment.id});return o.$patch("self",null,{dateAndTime:e.editAppointment.dateAndTime,endDateAndTime:e.editAppointment.endDateAndTime}).then(function(){a.add("Appointment is rescheduled")},function(e){a.addError(e.data)}).then(i)}},s(),i()}]),angular.module("appoints.signup",["ngRoute","appoints.api"]).controller("UserSignupCtrl",["$scope","$window","_","appointsapi","flash","moment",function(){}]),angular.module("appoints.usersession",["appoints.api","appoints.flash","appoints.config"]).factory("usersession",["$rootScope","$window","config","flash","$http",function(e,t,n,o,a){function r(){return angular.copy(d,this)}function i(r){t.localStorage.setItem("access_token",r.username+"~"+r.userPassword);var i={method:"POST",url:n.apiEndpoint+"/login",data:r};return a(i).then(function(t){var n=t.data;n.UserId>0&&(p.isAuthenticated=!0,p.userId=n.UserId,p.displayName=n.DisplayName,p.isAdmin=n.IsAdmin,p.isDoctor=n.IsDoctor,e.$broadcast("event:loggedin",p))},function(e){o.add(e.data.ExceptionMessage,"error")})}function s(e){var t={method:"PUT",url:n.apiEndpoint+"/login",data:e};return a(t).then(function(e){return e},function(e){o.add(e.data.ExceptionMessage,"error")})}function l(){t.localStorage.removeItem("access_token"),p=new r,e.$broadcast("event:loggedout",p)}var d={userId:"",displayName:"",isAuthenticated:!1,isAdmin:!1,isDoctor:!1},p=new r,m="";return{current:p,login:i,updatelogindetails:s,logout:l,returnTo:m}}]).run(["$window","$rootScope","$log","usersession","config","flash","$http",function(e,t,n,o,a,r,i){if(null!==e.localStorage.getItem("access_token")){var s={username:e.localStorage.getItem("access_token").split("~")[0],userPassword:e.localStorage.getItem("access_token").split("~")[1]},l={method:"POST",url:a.apiEndpoint+"/login",data:s};return i(l).then(function(e){userResource=e.data,userResource.UserId>0&&(o.current.isAuthenticated=!0,o.current.userId=userResource.UserId,o.current.displayName=userResource.DisplayName,t.$broadcast("event:loggedin",o.current))},function(e){n.info("Unable to login automatically: "+e.message),r.add("Unable to login automatically: "+e.data.ExceptionMessage,"error")})}}]),angular.module("appoints.landing",["appoints.config","appoints.usersession"]).controller("LandingPageCtrl",["$scope","config","usersession","$http","$location","flash",function(e,t,n,o,a,r){e.user=n.current,e.getDoctors=function(){var n=t.apiEndpoint+"/doctors",a={method:"GET",url:n};return o(a).then(function(t){e.doctors=t.data},function(e){r.add(e.data.ExceptionMessage,"error")})},e.getPatients=function(){var n=t.apiEndpoint+"/patients",a={method:"GET",url:n};return o(a).then(function(t){e.patients=t.data},function(e){r.add(e.data.ExceptionMessage,"error")})},e.openDoctorDetails=function(e){a.url("/profile/true/true/"+e.UserDetails.UserId)},e.openPatientDetails=function(e){a.url("/profile/true/false/"+e.UserDetails.UserId)},e.getDoctors(),e.getPatients()}]),angular.module("appoints.logindetails",["appoints.api","appoints.config","appoints.usersession","appoints.flash","ngRoute"]).controller("LoginDetailsCtrl",["$scope","flash","$http","$window","$rootScope","$location","config","usersession",function(e,t,n,o,a,r,i,s){e.updatelogindetails=function(){var n={};n.userId=s.current.userId,n.oldPassword=e.oldPassword,n.newPassword=e.newPassword,s.updatelogindetails(n).then(function(e){e&&(s.returnTo?r.url(s.returnTo):r.url("/"))},function(e){t.add(e.data.ExceptionMessage,"error")})}}]),angular.module("appoints.profile",["appoints.config","appoints.usersession"]).controller("ProfileCtrl",["$scope","config","usersession","$http","$location","flash","$routeParams",function(e,t,n,o,a,r,i){e.isreadonly="true"==i.isreadonly,e.dataLoading=!0,e.getProfileData=function(){var a=t.apiEndpoint;a=e.isreadonly?"true"==i.isdoctor?a+"/doctors/"+i.userid:a+"/patients/"+i.userid:n.current.isAdmin?a+"/admins/"+n.current.userId:n.current.isDoctor?a+"/doctors/"+n.current.userId:a+"/patients/"+n.current.userId;var s={method:"GET",url:a};return o(s).then(function(t){e.dataLoading=!1,e.profileData=t.data},function(e){r.add(e.data.ExceptionMessage,"error")})},e.goToLandingPage=function(){a.url("/landing")},e.getProfileData()}]),angular.module("appoints.signin",["appoints.api","appoints.config","appoints.usersession","appoints.flash","ngRoute"]).controller("UserSigninCtrl",["$scope","flash","$http","$window","$rootScope","$location","config","usersession",function(e,t,n,o,a,r,i,s){e.login=function(){var n={};n.username=e.username,n.userPassword=e.password,s.login(n).then(function(){s.current.isAuthenticated?s.returnTo?r.url(s.returnTo):r.url("/landing"):t.add("Invalid username or password.","error")})}}]),angular.module("appoints.authinterceptor",["appoints.usersession"]).factory("authInterceptor",["$rootScope","$q","$window","$location","$log","$injector",function(e,t,n,o,a,r){return{request:function(e){return e.headers=e.headers||{},n.localStorage.getItem("access_token")&&(e.headers.Authorization="Bearer "+n.localStorage.getItem("access_token")),e},response:function(e){return 401===e.status&&a.warn("Response 401"),e||t.when(e)},responseError:function(e){if(401===e.status){var n=r.get("usersession");a.info("Response Error 401",e),n.logout();var i=o.path();o.path("/login").search("returnTo",i)}return t.reject(e)}}}]).config(["$httpProvider",function(e){e.interceptors.push("authInterceptor")}]),angular.module("appoints.login",["appoints.config","appoints.usersession","ngRoute"]).run(["$window","$rootScope","$location","config","usersession",function(e,t,n,o,a){e.addEventListener("message",function(e){e.origin===o.defaultApiEndpoint&&a.login(e.data).then(function(){t.loginPopup&&(t.loginPopup.close(),delete t.loginPopup),a.returnTo?n.url(a.returnTo):n.url("/")})},!1)}]).controller("LoginCtrl",["$scope","$rootScope","$window","$location","config","usersession",function(e,t,n,o,a,r){r.returnTo=o.search().returnTo}]),angular.module("appoints",["ngRoute","ui.bootstrap.datetimepicker","appoints.directives","appoints.flash","appoints.usersession","appoints.authinterceptor","appoints.home","appoints.login","appoints.signin","appoints.logindetails","appoints.signup","appoints.landing","appoints.profile","appoints.appointments","appoints-client-templates"]).constant("_",window._).constant("moment",window.moment).config(["$httpProvider",function(e){e.defaults.useXDomain=!0,delete e.defaults.headers.common["X-Requested-With"]}]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"home/home.html",controller:"HomeCtrl",title:"Home"}).when("/login",{templateUrl:"auth/login.html",controller:"LoginCtrl",title:"Login"}).when("/appointments",{templateUrl:"appointments/appointments.html",controller:"AppointmentsCtrl",title:"Appointments"}).when("/usersignin",{templateUrl:"appointments/usersignin.html",controller:"UserSigninCtrl",title:"UserSignin"}).when("/usersignup",{templateUrl:"appointments/usersignup.html",controller:"UserSignupCtrl",title:"UserSignup"}).when("/logindetails",{templateUrl:"appointments/logindetails.html",controller:"LoginDetailsCtrl",title:"LoginDetails"}).when("/landing",{templateUrl:"appointments/landingpage.html",controller:"LandingPageCtrl",title:"LandingPage"}).when("/profile/:isreadonly/:isdoctor/:userid",{templateUrl:"appointments/profile.html",controller:"ProfileCtrl",title:"Profile"})}]).controller("AppCtrl",["$scope","$location","usersession",function(e,t,n){var o="Appoints";e.pageTitle=o,e.$on("$routeChangeSuccess",function(t,n){e.pageTitle=angular.isUndefined?o:n.title||o}),e.user=n.current,e.routeIs=function(e){return t.path()===e},e.logout=function(){n.logout(),t.url("/")},e.$on("event:loggedin",function(t,o){e.user=o,n.current=o}),e.$on("event:loggedout",function(t,o){e.user=o,n.current=o})}]);